<html>
<head>
    
    <title>Document</title>
    <style type="text/css">
        *{margin:0; padding:0}
        #container{
            border: 1px solid #ccc;
            border-bottom: none;
            border-right: none;
            position: relative;
    
        }
        ul{
            list-style:none;
        }
    ul li{
        border: 1px solid #ccc;
        border-top: none;
        border-left: none;
        float: left;
    }
    #container > div{
        float:right;
    }
    #person > div{
        background: #00ff00;
        position: absolute;
        left: 0px;
        top: 0px;
    }
    .food{
        position: absolute;
        left:0px;
        top: 0px;
        background: blue;
    }
    </style>
</head>
<body>

    <div id="container"></div>

    <ul id="uls"></ul>
    <button id="btn">Start game </button>
    <div>record:0</div>
    <div id="person"></div>


    <script type="text/javascript">
        var container = $id("container"),
            timer =null,
            uls= $id("uls"),
            btn=$id("btn"),
            person=$id("person"),
            personDiv= $tagName(person,"div"),
            lis=$tagName(uls,"li")
            datas={size:20,x:10,y:10}, //size larghezza altezza 20,nell'asse x 10 y 10
            perDate= {speed:200,code:39};

        function init(){
            createMap();
        }        
        function createMap(){

            container.style.width = (datas.size+1)*datas.x+"px";
            
            for(var i=0; i<datas.x*datas.y; i++){
                var oDiv = document.createElement("li");
                oDiv.style.width=oDiv.style.height=datas.size+1+"px";
                uls.appendChild(oDiv);
            }
        }
        start();
        function start(){
            btn.onclick=function(){
            createPerson();
            movePerson();
            bindPerson();
            createFood();
            }
        }  
        function createFood(){
            var random = Math.floor(Math.random()*(lis.length-1));
            var food = document.createElement("div");
            food.className="food";
            food.style.width= food.style.height=datas.size+1+"px";
            food.style.left= lis[random].offsetLeft+"px";
            food.style.height= lis[random].offsetTop+"px";
            container.appendChild(food);
        }
        function createPerson(){
            var oPerson = document.createElement("div");
            oPerson.style.width=oPerson.style.height= datas.size+1+"px";
            person.appendChild(oPerson);
        }
      
        function movePerson(){
            timer=setInterval(function(){
                switch(perDate.code){
                    case 37:
                    personDiv[0].style.left=personDiv[0].offsetLeft-(datas.size+1)+"px";
                    break;
                    case 38:
                    personDiv[0].style.top=personDiv[0].offsetTop-(datas.size+1)+"px";
                    break;
                    case 39:
                        personDiv[0].style.left=personDiv[0].offsetLeft+(datas.size+1)+"px";
                    break;
                    case 40:
                    personDiv[0].style.top=personDiv[0].offsetTop+(datas.size+1)+"px";
                    break;
                }
            },perDate.speed);
        }
        function bindPerson(){
            document.onkeydown=function(e){
                var e =window.event || e;
                switch(e.keyCode){
                    case 37:
                    perDate.code=37;
                    break;
                    case 38:
                    perDate.code=38;
                    break;
                    case 39:
                    perDate.code=39;
                    break;
                    case 40:
                        perDate.code=40;
                    break;
                }
            }
        }
        function $tagName(parend,child){
            return parend.getElementsByTagName(child);
        }
        function $id(id){
            return document.getElementById(id)
        }
        init();
    </script>
</body>
</html>